# 🚨 真机崩溃快速修复

## 问题
```
Library not loaded: @rpath/llama.framework/llama
```

## 3 步修复

### 第 1 步：打开项目设置
```
Xcode 左侧 → 点击蓝色 ChatMate 项目图标
TARGETS → ChatMate
General 标签页
```

### 第 2 步：找到 llama.xcframework
```
向下滚动到：
"Frameworks, Libraries, and Embedded Content"

找到这一行：
llama.xcframework
```

### 第 3 步：修改 Embed 设置
```
点击 llama.xcframework 右侧的下拉菜单

从：Do Not Embed  ❌
改为：Embed & Sign  ✅
```

---

## 重新编译运行

```bash
⌘ + Shift + K  # 清理
⌘ + B          # 编译
⌘ + R          # 运行到真机
```

---

## ✅ 修复成功的标志

在 Xcode 控制台看到：
```
✅ 从 App Bundle 加载模型: ...
📊 模型大小: 1.0 GB
开始加载模型: ...
模型加载成功: ...
```

而不是崩溃！

---

## 🔍 如果还是崩溃

### 检查 1：确认设置生效

Build Phases → Embed Frameworks
应该能看到 `llama.xcframework` 在列表中

### 检查 2：查看编译日志

编译时搜索 "EmbedFrameworks"
应该能看到复制 framework 的日志

### 检查 3：验证 XCFramework 路径

确认文件存在：
```bash
ls -la ~/Downloads/build-apple/llama.xcframework/
```

应该看到：
```
ios-arm64/
ios-arm64_x86_64-simulator/
Info.plist
```

---

## 📱 真机 vs 模拟器

| 设备 | Link | Embed | 结果 |
|------|------|-------|------|
| 模拟器 | ✅ | ❌ | ✅ 正常 |
| 真机 | ✅ | ❌ | ❌ 崩溃 |
| 真机 | ✅ | ✅ | ✅ 正常 |

**关键**：真机必须 **Link + Embed** 都设置！

---

就这么简单！去修改吧 💪
